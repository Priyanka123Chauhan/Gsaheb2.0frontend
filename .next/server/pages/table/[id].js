"use strict";(()=>{var e={};e.id=897,e.ids=[897,660],e.modules={1477:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>b,default:()=>u,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>g,reportWebVitals:()=>x,routeModule:()=>w,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>f});var s=a(7093),l=a(5244),i=a(1323),o=a(2899),n=a.n(o),d=a(3414),c=a(3161),m=e([c]);c=(m.then?(await m)():m)[0];let u=(0,i.l)(c,"default"),g=(0,i.l)(c,"getStaticProps"),p=(0,i.l)(c,"getStaticPaths"),h=(0,i.l)(c,"getServerSideProps"),b=(0,i.l)(c,"config"),x=(0,i.l)(c,"reportWebVitals"),f=(0,i.l)(c,"unstable_getStaticProps"),y=(0,i.l)(c,"unstable_getStaticPaths"),S=(0,i.l)(c,"unstable_getStaticParams"),j=(0,i.l)(c,"unstable_getServerProps"),v=(0,i.l)(c,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/table/[id]",pathname:"/table/[id]",bundlePath:"",filename:""},components:{App:d.default,Document:n()},userland:c});r()}catch(e){r(e)}})},8316:()=>{(0,require("@supabase/supabase-js").createClient)("https://oeqdlqmlhclxeelqevlc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9lcWRscW1saGNseGVlbHFldmxjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA2NTQ2MTEsImV4cCI6MjA2NjIzMDYxMX0.zeTHfg41DFcGlNLPruysavXOsKHgtr5Uby-f730UWVs")},3161:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>u});var s=a(997),l=a(6689),i=a(1163),o=a(5941);a(8316);var n=a(8253),d=a(9159),c=a(1390),m=e([o]);o=(m.then?(await m)():m)[0];let g=e=>fetch(e).then(e=>e.json());function u(){let e=(0,i.useRouter)(),{id:t}=e.query,[a,r]=(0,l.useState)([]),[m,u]=(0,l.useState)(!1),[p,h]=(0,l.useState)(null),[b,x]=(0,l.useState)("All"),[f,y]=(0,l.useState)(!1),[S,j]=(0,l.useState)(null),[v,w]=(0,l.useState)({}),P="https://backend-valtri.onrender.com/".replace(/\/+$/,""),{data:N,error:I,isLoading:O}=(0,o.default)(`${P}/api/menu`,g),C=["All",...new Set(N?.map(e=>e.category).filter(Boolean))],_="All"===b?N:N?.filter(e=>e.category===b),q=e=>{w(t=>({...t,[e.id]:!0})),setTimeout(()=>{w(t=>({...t,[e.id]:!1}))},1e3),r(t=>t.find(t=>t.item_id===e.id)?t.map(t=>t.item_id===e.id?{...t,quantity:(t.quantity||1)+1}:t):[...t,{item_id:e.id,name:e.name,price:e.price,category:e.category,image_url:e.image_url,quantity:1}]),y(!0),console.log("Analytics - Item added:",{item_id:e.id,name:e.name,timestamp:new Date().toISOString()})},$=async()=>{if(0===a.length)return alert("Cart is empty");try{j(null),console.log("PlaceOrder - API URL:",P),console.log("PlaceOrder - Payload:",JSON.stringify({table_id:parseInt(t),items:a}));let s=await fetch(`${P}/api/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({table_id:parseInt(t),items:a}),signal:AbortSignal.timeout(3e4)});console.log("PlaceOrder - Response status:",s.status);let l=await s.json();if(!s.ok||!l.id)throw Error(l.error||`HTTP ${s.status}`);localStorage.setItem("orderId",l.id),r([]),y(!1),e.replace(`/order/${l.id}`)}catch(e){console.error("PlaceOrder error:",e.message),j(`Failed to place order: ${e.message}`)}},A=async()=>{if(0===a.length)return alert("Cart is empty");try{j(null),console.log("UpdateOrder - API URL:",`${P}/api/orders/${p}`),console.log("UpdateOrder - Payload:",JSON.stringify({items:a}));let t=await fetch(`${P}/api/orders/${p}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:a}),signal:AbortSignal.timeout(3e4)});console.log("UpdateOrder - Response status:",t.status);let s=await t.json();if(!t.ok||!s.id)throw Error(s.error||`HTTP ${t.status}`);localStorage.removeItem("appendOrder"),u(!1),h(null),localStorage.setItem("orderId",s.id),r([]),y(!1),e.replace(`/order/${s.id}`)}catch(e){console.error("UpdateOrder error:",e.message),j(`Failed to update order: ${e.message}`)}};return O?s.jsx("div",{className:"text-center mt-10",role:"status",children:"Loading menu..."}):S?s.jsx("div",{className:"text-center mt-10 text-red-500",role:"alert",children:S}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 relative",children:[a.length>0&&(0,s.jsxs)("button",{className:"fixed top-4 right-4 bg-blue-500 text-white p-2 rounded-full shadow-lg hover:bg-blue-600 z-50",onClick:()=>{y(e=>!e)},"aria-label":"Toggle cart",children:[s.jsx(d.Z,{className:"h-6 w-6"}),s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:a.reduce((e,t)=>e+(t.quantity||1),0)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[s.jsx(c.Z,{className:"h-6 w-6 text-blue-500"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800","aria-label":"Welcome to Gsaheb Cafe",children:"Welcome to Valtri Labs Cafe"}),s.jsx(c.Z,{className:"h-6 w-6 text-blue-500"})]}),s.jsx("div",{className:"mb-6 overflow-x-auto whitespace-nowrap pb-2",role:"tablist","aria-label":"Menu categories",children:s.jsx("div",{className:"flex gap-2",children:C.map(e=>s.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-medium ${b===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>x(e),role:"tab","aria-selected":b===e,"aria-controls":"menu-items",children:e},e))})}),s.jsx("div",{id:"menu-items",className:"grid grid-cols-2 md:grid-cols-3 gap-4",role:"region","aria-live":"polite",children:_?.length===0?s.jsx("p",{className:"col-span-full text-center text-gray-500",children:"No items in this category."}):_.map(e=>(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[s.jsx("img",{src:e.image_url||"https://images.unsplash.com/photo-1550547660-d9450f859349",alt:e.name,className:"w-full h-32 object-cover rounded-md mb-2"}),s.jsx("h2",{className:"font-semibold text-lg",children:e.name}),s.jsx("p",{className:"text-sm text-gray-500",children:e.category}),(0,s.jsxs)("p",{className:"text-sm font-medium",children:["â‚¹",e.price.toFixed(2)]}),s.jsx("button",{className:`mt-2 w-full py-2 rounded-lg text-white transition-colors duration-300 ${v[e.id]?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"}`,onClick:()=>q(e),"aria-label":v[e.id]?`${e.name} added to cart`:`Add ${e.name} to cart`,children:v[e.id]?"Added":"Add to Cart"})]},e.id))}),s.jsx(n.Z,{cart:a,setCart:r,onPlaceOrder:m?A:$,onClose:()=>y(!1),isOpen:f})]})}r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},5941:e=>{e.exports=import("swr")},9159:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(6689);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))})}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[899,342,930],()=>a(1477));module.exports=r})();