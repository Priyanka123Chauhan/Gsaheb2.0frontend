(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{8195:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(6093)}])},1046:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});let s=(0,a(8967).eI)("https://oeqdlqmlhclxeelqevlc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9lcWRscW1saGNseGVlbHFldmxjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA2NTQ2MTEsImV4cCI6MjA2NjIzMDYxMX0.zeTHfg41DFcGlNLPruysavXOsKHgtr5Uby-f730UWVs")},6093:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var s=a(5893),r=a(7294),l=a(1163),n=a(1046),i=a(8317),d=a(4678),c=a(6587),o=a(6162),m=a(3681),x=a(2044),h=a(7767),u=a(513),p=a(3903),g=a(1429),b=a(9711),y=a(484),f=a(1594),j=a(9198),w=a.n(j);a(5843);var N=a(5697),v=a.n(N);class k extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?(0,s.jsxs)("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg",children:["Error: ",this.state.error.message]}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1,error:null}}}k.propTypes={children:v().node.isRequired};let S=e=>{let{statuses:t,onChange:a,label:r}=e;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:r}),(0,s.jsx)("div",{className:"border p-3 rounded-lg bg-gray-50",children:["pending","paid"].map(e=>(0,s.jsxs)("label",{className:"flex items-center mb-2",children:[(0,s.jsx)("input",{type:"checkbox",value:e,checked:t.includes(e),onChange:s=>{a(s.target.checked?[...t,e]:t.filter(t=>t!==e))},className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"capitalize ".concat("paid"===e?"text-green-600":"text-yellow-600"),children:e})]},e))})]})};function _(){let e=(0,l.useRouter)(),[t,a]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[v,_]=(0,r.useState)({name:"",category:"",price:"",is_available:!0}),[D,C]=(0,r.useState)({wifiname:"",password:""}),[P,O]=(0,r.useState)([]),[I,T]=(0,r.useState)(!1),[E,F]=(0,r.useState)(null),[A,H]=(0,r.useState)(""),[R,q]=(0,r.useState)(""),[M,U]=(0,r.useState)(!1),[L,W]=(0,r.useState)(null),[Z,z]=(0,r.useState)(()=>localStorage.getItem("activeTab")||"Pending Orders"),[J,V]=(0,r.useState)(null),[$,X]=(0,r.useState)([]),[Q,Y]=(0,r.useState)([]),[G,B]=(0,r.useState)({dateRange:"today",customStart:new Date,customEnd:new Date,statuses:["paid"],page:1,perPage:10}),[K,ee]=(0,r.useState)("order"),[et,ea]=(0,r.useState)({startDate:new Date,endDate:new Date,statuses:["paid"]}),[es,er]=(0,r.useState)(null),[el,en]=(0,r.useState)(0),[ei,ed]=(0,r.useState)(0),[ec,eo]=(0,r.useState)(!1),[em,ex]=(0,r.useState)(null),[eh,eu]=(0,r.useState)(""),[ep,eg]=(0,r.useState)(!1),[eb,ey]=(0,r.useState)({totalOrders:0,totalRevenue:0,mostSoldItem:["N/A",0],peakHour:0,aov:0,totalItemsSold:0});(0,r.useEffect)(()=>{localStorage.setItem("activeTab",Z)},[Z]),(0,r.useEffect)(()=>{"Wifi"===Z&&ef()},[Z]);let ef=async()=>{T(!0),F(null);try{let{data:e,error:t}=await n.O.from("wifi_credentials").select("*").order("created_at",{ascending:!1});if(t)throw t;O(e||[])}catch(e){F("Failed to fetch wifi credentials: ".concat(e.message))}finally{T(!1)}},ej=async()=>{if(!D.wifiname||!D.password){F("Wifi name and password are required");return}F(null);try{let{data:e,error:t}=await n.O.from("wifi_credentials").insert([{wifiname:D.wifiname,password:D.password,is_active:!0}]).select();if(t)throw t;O(t=>[e[0],...t]),C({wifiname:"",password:""})}catch(e){F("Failed to add wifi credential: ".concat(e.message))}},ew=e=>{let t=new Date(e),a=(0,i.I)(t,{hours:5,minutes:30});return(0,d.WU)(a,"dd/MM/yyyy HH:mm:ss")},eN=e=>{let t=new Date(e),a=(0,i.I)(t,{hours:5,minutes:30});return(0,d.WU)(a,"dd/MM/yyyy")};(0,r.useEffect)(()=>{(async()=>{let{data:{session:t}}=await n.O.auth.getSession();t?U(!0):e.push("/admin/login")})()},[e]),(0,r.useEffect)(()=>{let e=async()=>{try{var e;W(null);let t=((e="https://backend-valtri.onrender.com/",void 0===e)?void 0:e.replace(/\/+$/,""))||"",s=0;for(;s<3;)try{let e=await fetch("".concat(t,"/api/admin/orders"),{cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status));let s=(await e.json()||[]).sort((e,t)=>new Date(t.created_at)-new Date(e.created_at));a(s);break}catch(e){if(3===(s+=1)){W("Failed to fetch orders after ".concat(3," attempts: ").concat(e.message));break}await new Promise(e=>setTimeout(e,1e3*s))}}catch(e){W("Failed to fetch orders: ".concat(e.message))}};M&&"Pending Orders"===Z&&e()},[M,Z]),(0,r.useEffect)(()=>{if(!M||"Pending Orders"!==Z)return;let e=n.O.channel("pending-orders-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async e=>{let t=e.new;if("pending"===t.status)try{var s;let e=((s="https://backend-valtri.onrender.com/",void 0===s)?void 0:s.replace(/\/+$/,""))||"",r=0;for(;r<3;)try{let s=await fetch("".concat(e,"/api/orders/").concat(t.id),{cache:"no-store"});if(!s.ok)throw Error("HTTP ".concat(s.status));let r=await s.json();a(e=>[r,...e].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)));break}catch(e){if(3===(r+=1)){W("Failed to fetch new order after ".concat(3," attempts: ").concat(e.message));break}await new Promise(e=>setTimeout(e,1e3*r))}}catch(e){W("Failed to fetch new order: ".concat(e.message))}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},e=>{let t=e.new;"pending"!==t.status&&a(e=>e.filter(e=>e.id!==t.id))}).subscribe();return()=>{n.O.removeChannel(e)}},[M,Z]);let ev=async()=>{eg(!0),W(null);let e={...eb};try{var t;let a=((t="https://backend-valtri.onrender.com/",void 0===t)?void 0:t.replace(/\/+$/,""))||"",s=new Date;s.setHours(0,0,0,0);let r=new Date;for(let t of(r.setHours(23,59,59,999),["total-orders","total-revenue","most-sold-item","peak-hours","average-order-value","total-items-sold"])){let l=0;for(;l<3;)try{let l=await fetch("".concat(a,"/api/admin/analytics/").concat(t,"?startDate=").concat(s.toISOString(),"&endDate=").concat(r.toISOString()),{headers:{"Content-Type":"application/json"},cache:"no-store"});if(!l.ok)throw Error("HTTP ".concat(l.status));let n=await l.json();"total-orders"===t&&(e.totalOrders=n.totalOrders||0),"total-revenue"===t&&(e.totalRevenue=n.totalRevenue||0),"most-sold-item"===t&&(e.mostSoldItem=[n.name||"N/A",n.totalSold||0]),"peak-hours"===t&&(e.peakHour=n.peakHour||"N/A"),"average-order-value"===t&&(e.aov=n.aov||0),"total-items-sold"===t&&(e.totalItemsSold=n.totalItemsSold||0);break}catch(e){3===(l+=1)&&W("Failed to fetch ".concat(t," data after ").concat(3," attempts: ").concat(e.message)),await new Promise(e=>setTimeout(e,1e3*l))}}ey(e)}catch(e){W("Unexpected error fetching analytics: ".concat(e.message))}finally{eg(!1)}};(0,r.useEffect)(()=>{M&&"Data Analytics"===Z&&ev()},[M,Z]),(0,r.useEffect)(()=>{let e=async()=>{try{var e;W(null);let t=((e="https://backend-valtri.onrender.com/",void 0===e)?void 0:e.replace(/\/+$/,""))||"",a=new Date,s=new Date(a);s.setDate(a.getDate()-7),s.setHours(0,0,0,0);let r=new Date(a);r.setHours(23,59,59,999);let l=new URLSearchParams({startDate:s.toISOString(),endDate:r.toISOString(),statuses:"paid",aggregate:"revenue"}),n=0;for(;n<3;)try{let e=await fetch("".concat(t,"/api/admin/orders/history?").concat(l),{cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status));let a=await e.json();en(a.totalRevenue||0);break}catch(e){3===(n+=1)&&W("Failed to fetch weekly revenue after ".concat(3," attempts: ").concat(e.message)),await new Promise(e=>setTimeout(e,1e3*n))}let i=new Date(a);i.setDate(a.getDate()-30),i.setHours(0,0,0,0);let d=new Date(a);d.setHours(23,59,59,999);let c=new URLSearchParams({startDate:i.toISOString(),endDate:d.toISOString(),statuses:"paid",aggregate:"revenue"}),o=0;for(;o<3;)try{let e=await fetch("".concat(t,"/api/admin/orders/history?").concat(c),{cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status));let a=await e.json();ed(a.totalRevenue||0);break}catch(e){3===(o+=1)&&W("Failed to fetch monthly revenue after ".concat(3," attempts: ").concat(e.message)),await new Promise(e=>setTimeout(e,1e3*o))}}catch(e){W("Failed to fetch revenue data: ".concat(e.message))}};M&&"Data Analytics"===Z&&e()},[M,Z]),(0,r.useEffect)(()=>{let e=async()=>{try{W(null);let{data:e,error:t}=await n.O.from("menu_items").select("*");if(t)throw t;N(e||[])}catch(e){W("Failed to fetch menu: ".concat(e.message))}};M&&e()},[M]);let ek=async()=>{try{var e;let t,a;W(null);let s=((e="https://backend-valtri.onrender.com/",void 0===e)?void 0:e.replace(/\/+$/,""))||"",r=new Date;switch(G.dateRange){case"today":t=new Date(r.setHours(0,0,0,0)).toISOString(),a=new Date(r.setHours(23,59,59,999)).toISOString();break;case"yesterday":(t=new Date(r.setDate(r.getDate()-1))).setHours(0,0,0,0),(a=new Date(r.setDate(r.getDate()))).setHours(23,59,59,999),t=t.toISOString(),a=a.toISOString();break;case"last7days":(t=new Date(r.setDate(r.getDate()-7))).setHours(0,0,0,0),(a=new Date(r)).setHours(23,59,59,999),t=t.toISOString(),a=a.toISOString();break;case"custom":(t=new Date(G.customStart)).setHours(0,0,0,0),(a=new Date(G.customEnd)).setHours(23,59,59,999),t=t.toISOString(),a=a.toISOString()}let l=new URLSearchParams;t&&a&&(l.append("startDate",t),l.append("endDate",a)),G.statuses.length&&l.append("statuses",G.statuses.join(","));let n=0;for(;n<3;)try{let e=await fetch("".concat(s,"/api/admin/orders/history?").concat(l),{cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status));let t=await e.json();Y(t||[]);break}catch(e){3===(n+=1)&&W("Failed to fetch order history after ".concat(3," attempts: ").concat(e.message)),await new Promise(e=>setTimeout(e,1e3*n))}}catch(e){W("Failed to fetch order history: ".concat(e.message))}};(0,r.useEffect)(()=>{M&&"Order History"===Z&&ek()},[M,Z,G]);let eS=async()=>{try{W(null);let{error:e}=await n.O.auth.signInWithPassword({email:A,password:R});if(e)throw e;U(!0)}catch(e){W("Login failed: ".concat(e.message))}},e_=e=>{ex(e),eu(""),eo(!0)},eD=async()=>{if(!eh){W("Please select a payment method");return}try{var e;W(null);let t=((e="https://backend-valtri.onrender.com/",void 0===e)?void 0:e.replace(/\/+$/,""))||"",s=0;for(;s<3;)try{let e=await fetch("".concat(t,"/api/orders/").concat(em,"/pay"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_type:eh}),cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status));a(e=>e.filter(e=>e.id!==em)),eo(!1),ex(null),eu("");break}catch(e){if(3===(s+=1))throw Error("Failed to mark order as paid after ".concat(3," attempts: ").concat(e.message));await new Promise(e=>setTimeout(e,1e3*s))}}catch(e){W("Failed to mark order as paid: ".concat(e.message))}},eC=e=>{V(e),X([...e.items])},eP=(e,t)=>{X(a=>{let s=[...a];return s[e]={...s[e],quantity:Math.max(1,(s[e].quantity||1)+t)},s})},eO=e=>{X(t=>t.filter((t,a)=>a!==e))},eI=e=>{let t=j.find(t=>t.id===parseInt(e,10));t&&!$.some(e=>e.item_id===t.id)&&X(e=>[...e,{item_id:t.id,name:t.name,price:t.price,quantity:1,category:t.category}])},eT=async()=>{try{var e;W(null);let t=((e="https://backend-valtri.onrender.com/",void 0===e)?void 0:e.replace(/\/+$/,""))||"",s=0;for(;s<3;)try{let e=await fetch("".concat(t,"/api/orders/").concat(J.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:$}),cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status));let s=await e.json();a(e=>e.map(e=>e.id===J.id?s:e).sort((e,t)=>new Date(t.created_at)-new Date(e.created_at))),V(null),X([]);break}catch(e){if(3===(s+=1))throw Error("Failed to update order after ".concat(3," attempts: ").concat(e.message));await new Promise(e=>setTimeout(e,1e3*s))}}catch(e){W("Failed to update order: ".concat(e.message))}},eE=async()=>{if(!v.name||!v.price){W("Name and price are required");return}try{W(null);let{data:e,error:t}=await n.O.from("menu_items").insert([{name:v.name,category:v.category||"",price:parseFloat(v.price),is_available:v.is_available}]).select();if(t)throw t;N(t=>[...t,e[0]]),_({name:"",category:"",price:"",is_available:!0})}catch(e){W("Failed to add item: ".concat(e.message))}},eF=async e=>{try{W(null);let{error:t}=await n.O.from("menu_items").delete().eq("id",e);if(t)throw t;N(t=>t.filter(t=>t.id!==e))}catch(e){W("Failed to remove item: ".concat(e.message))}},eA=async(e,t)=>{try{W(null);let{error:a}=await n.O.from("menu_items").update({is_available:!t}).eq("id",e);if(a)throw a;N(a=>a.map(a=>a.id===e?{...a,is_available:!t}:a))}catch(e){W("Failed to update availability: ".concat(e.message))}},eH=async(e,t)=>{if(!t){W("Please select an image to upload");return}try{W(null);let a=t.name.split(".").pop(),s="item_".concat(e,"_").concat(Date.now(),".").concat(a),{error:r}=await n.O.storage.from("menu-images").upload(s,t);if(r)throw r;let{data:l}=n.O.storage.from("menu-images").getPublicUrl(s);if(!l.publicUrl)throw Error("Failed to get public URL");let{error:i}=await n.O.from("menu_items").update({image_url:l.publicUrl}).eq("id",e);if(i)throw i;N(t=>t.map(t=>t.id===e?{...t,image_url:l.publicUrl}:t))}catch(e){W("Failed to upload image: ".concat(e.message))}},eR=async(e,t)=>{if(t)try{W(null);let a=t.split("/").pop(),{error:s}=await n.O.storage.from("menu-images").remove([a]);if(s)throw s;let{error:r}=await n.O.from("menu_items").update({image_url:null}).eq("id",e);if(r)throw r;N(t=>t.map(t=>t.id===e?{...t,image_url:null}:t))}catch(e){W("Failed to delete image: ".concat(e.message))}},eq=e=>{let t=window.open("","_blank","width=400,height=600");if(!t){W("Failed to open print window. Please allow pop-ups for this site.");return}let a=e.items.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0),s=ew(new Date(e.created_at));t.document.write("\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Receipt - Order #".concat(e.order_number||e.id,'</title>\n          <style>\n            body {\n              margin: 0;\n              padding: 0;\n              font-family: Arial, sans-serif;\n              font-size: 10px;\n              line-height: 1.2;\n              color: #000;\n              width: 80mm;\n            }\n            .receipt {\n              width: 72mm;\n              padding: 4mm;\n              margin: 0 auto;\n              background: white;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 5px;\n            }\n            .header h1 {\n              font-size: 14px;\n              margin: 0;\n            }\n            .header p {\n              margin: 2px 0;\n            }\n            .divider {\n              border-top: 1px dashed #000;\n              margin: 5px 0;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              table-layout: fixed;\n            }\n            th, td {\n              padding: 2px;\n            }\n            th.right, td.right {\n              text-align: right;\n            }\n            .item-name {\n              width: 45%;\n              white-space: nowrap;\n              overflow: hidden;\n              text-overflow: ellipsis;\n            }\n            .quantity {\n              width: 15%;\n              text-align: center;\n            }\n            .price {\n              width: 40%;\n              text-align: right;\n            }\n            .total-table {\n              width: 100%;\n              margin-top: 5px;\n            }\n            .footer {\n              text-align: center;\n              margin-top: 5px;\n            }\n            @media print {\n              .receipt {\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 72mm;\n                margin: 0;\n                padding: 4mm;\n              }\n              @page {\n                size: 80mm auto;\n                margin: 0;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="receipt">\n            <div class="header">\n              <h1>Gsaheb Cafe</h1>\n              <p>Order #').concat(e.order_number||e.id,"</p>\n              <p>Table ").concat(e.table_id||"N/A","</p>\n              <p>Date: ").concat(s,"</p>\n              <p>Payment Method: ").concat(e.payment_type||"N/A",'</p>\n            </div>\n            <div class="divider"></div>\n            <table>\n              <thead>\n                <tr>\n                  <th class="item-name">Item</th>\n                  <th class="quantity">Qty</th>\n                  <th class="price">Price</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(e.items.map(e=>'\n                    <tr>\n                      <td class="item-name">'.concat(e.name||"N/A",'</td>\n                      <td class="quantity">').concat(e.quantity||1,'</td>\n                      <td class="price">₹').concat(((e.price||0)*(e.quantity||1)).toFixed(2),"</td>\n                    </tr>\n                  ")).join(""),'\n              </tbody>\n            </table>\n            <div class="divider"></div>\n            <table class="total-table">\n              <tr>\n                <td class="item-name">Total</td>\n                <td class="quantity"></td>\n                <td class="price">₹').concat(a.toFixed(2),'</td>\n              </tr>\n            </table>\n            <div class="footer">\n              <p>Thank you for dining with us!</p>\n            </div>\n          </div>\n          <script>\n            window.onload = () => {\n              window.print();\n              window.onafterprint = () => window.close();\n            };\n          </script>\n        </body>\n      </html>\n    ')),t.document.close()},eM=async()=>{try{var e;let t;W(null);let a=((e="https://backend-valtri.onrender.com/",void 0===e)?void 0:e.replace(/\/+$/,""))||"",s=0,r=new Date(et.startDate);r.setHours(0,0,0,0);let l=new Date(et.endDate);l.setHours(23,59,59,999);let n=new URLSearchParams({startDate:r.toISOString(),endDate:l.toISOString(),statuses:et.statuses.join(",")});for(;s<3;)try{let e=await fetch("".concat(a,"/api/admin/orders/export?").concat(n),{cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status));t=await e.text();break}catch(e){if(3===(s+=1))throw Error("Failed to export orders after ".concat(3," attempts: ").concat(e.message));await new Promise(e=>setTimeout(e,1e3*s))}let i=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8"}),d=window.URL.createObjectURL(i),c=document.createElement("a");c.href=d,c.download="orders_".concat(K,"_").concat(eN(new Date),".csv"),document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(d),document.body.removeChild(c)}catch(e){W("Failed to export orders: ".concat(e.message))}};return M?(0,s.jsx)(k,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,s.jsxs)("div",{className:"w-64 bg-white shadow-lg p-4 fixed h-full",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Product by"}),(0,s.jsx)("a",{href:"https://www.valtrilabs.com/",target:"_blank",rel:"noopener noreferrer",className:"text-2xl font-extrabold bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 bg-clip-text text-transparent",children:"Valtri Labs"})]}),(0,s.jsx)("nav",{children:["Pending Orders","Order History","Menu Management","Wifi","Data Analytics"].map(e=>(0,s.jsxs)("button",{className:"w-full text-left py-3 px-4 mb-2 rounded-lg flex items-center gap-2 ".concat(Z===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-200"),onClick:()=>z(e),"aria-current":Z===e?"page":void 0,children:["Pending Orders"===e&&(0,s.jsx)(c.Z,{className:"h-5 w-5"}),"Order History"===e&&(0,s.jsx)(o.Z,{className:"h-5 w-5"}),"Menu Management"===e&&(0,s.jsx)(m.Z,{className:"h-5 w-5"}),"Wifi"===e&&(0,s.jsx)(m.Z,{className:"h-5 w-5"}),"Data Analytics"===e&&(0,s.jsx)(x.Z,{className:"h-5 w-5"}),e]},e))}),(0,s.jsx)("button",{className:"w-full mt-4 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition",onClick:()=>n.O.auth.signOut().then(()=>U(!1)),"aria-label":"Logout",children:"Logout"})]}),(0,s.jsxs)("div",{className:"ml-64 flex-1 p-8",children:[L&&(0,s.jsxs)("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg mb-6",role:"alert",children:[L,"Data Analytics"===Z&&(0,s.jsx)("button",{className:"ml-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",onClick:ev,"aria-label":"Retry fetching analytics",children:"Retry"})]}),"Pending Orders"===Z&&(0,s.jsxs)("div",{className:"px-4 py-6 max-w-screen-lg mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center md:text-left",children:"Pending Orders"}),0===t.length?(0,s.jsx)("p",{className:"text-gray-500 text-center text-lg",children:"No pending orders at this moment"}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>{let t=e.items.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0),a=ew(new Date(e.created_at));return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 flex-wrap gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",e.order_number||e.id]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Table ",e.table_id||"N/A"]})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)("button",{className:"bg-blue-600 text-white px-3 py-1.5 rounded-md hover:bg-blue-700 flex items-center gap-1 text-sm transition",onClick:()=>eC(e),"aria-label":"Edit order ".concat(e.order_number||e.id),children:[(0,s.jsx)(h.Z,{className:"h-4 w-4"}),"Edit"]}),(0,s.jsx)("button",{className:"bg-green-600 text-white px-3 py-1.5 rounded-md hover:bg-green-700 flex items-center gap-1 text-sm transition",onClick:()=>e_(e.id),"aria-label":"Mark order ".concat(e.order_number||e.id," as paid"),children:"Mark Paid"}),(0,s.jsxs)("button",{className:"bg-gray-600 text-white px-3 py-1.5 rounded-md hover:bg-gray-700 flex items-center gap-1 text-sm transition",onClick:()=>eq(e),"aria-label":"Print bill for order ".concat(e.order_number||e.id),children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),"Print"]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full min-w-[320px] text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Item"}),(0,s.jsx)("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Qty"}),(0,s.jsx)("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Price"})]})}),(0,s.jsx)("tbody",{children:e.items.map((e,t)=>(0,s.jsxs)("tr",{className:"".concat(t%2==0?"bg-gray-50":""," hover:bg-gray-100 transition-colors"),children:[(0,s.jsx)("td",{className:"py-2 px-3 text-gray-600",children:e.name||"N/A"}),(0,s.jsx)("td",{className:"text-right py-2 px-3 text-gray-600",children:e.quantity||1}),(0,s.jsxs)("td",{className:"text-right py-2 px-3 text-gray-600",children:["₹",((e.price||0)*(e.quantity||1)).toFixed(2)]})]},"".concat(e.item_id,"-").concat(t)))})]})}),(0,s.jsxs)("div",{className:"flex justify-between mt-6 text-base font-semibold text-gray-900",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["₹",t.toFixed(2)]})]})]},e.id)})})]}),"Wifi"===Z&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Wifi Management"}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Wifi"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:D.wifiname,onChange:e=>C({...D,wifiname:e.target.value}),className:"border p-2 rounded-md w-full","aria-label":"Wifi name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Password"}),(0,s.jsx)("input",{type:"text",value:D.password,onChange:e=>C({...D,password:e.target.value}),className:"border p-2 rounded-md w-full","aria-label":"Wifi password"})]}),(0,s.jsx)("button",{className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",onClick:ej,"aria-label":"Add wifi",children:"Add Wifi"})]})]}),I?(0,s.jsx)("p",{children:"Loading wifi credentials..."}):E?(0,s.jsx)("p",{className:"text-red-600",children:E}):(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50 border-b",children:[(0,s.jsx)("th",{className:"text-left py-3 px-3 text-sm font-semibold text-gray-700",children:"Wifi Name"}),(0,s.jsx)("th",{className:"text-left py-3 px-3 text-sm font-semibold text-gray-700",children:"Password"}),(0,s.jsx)("th",{className:"text-left py-3 px-3 text-sm font-semibold text-gray-700",children:"Active"})]})}),(0,s.jsx)("tbody",{children:P.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b ".concat(t%2==0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-800",children:e.wifiname||"N/A"}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.password||"N/A"}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.is_active?"Yes":"No"})]},e.id))})]})})]}),ec&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Select Payment Method"}),(0,s.jsxs)("select",{value:eh,onChange:e=>eu(e.target.value),className:"border p-2 rounded-md w-full mb-4","aria-label":"Select payment method",children:[(0,s.jsx)("option",{value:"",children:"Select Payment Method"}),(0,s.jsx)("option",{value:"UPI",children:"UPI"}),(0,s.jsx)("option",{value:"Cash",children:"Cash"}),(0,s.jsx)("option",{value:"Bank",children:"Bank"}),(0,s.jsx)("option",{value:"Card",children:"Card"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition",onClick:()=>{eo(!1),ex(null),eu("")},"aria-label":"Cancel payment selection",children:"Cancel"}),(0,s.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",onClick:eD,"aria-label":"Confirm payment",children:"Confirm Payment"})]})]})}),J&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"flex flex-col bg-white rounded-lg max-w-2xl w-full max-h-[90vh] p-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-6 border-b",children:(0,s.jsxs)("h3",{className:"text-xl font-semibold",children:["Edit Order #",J.order_number||J.id]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[(0,s.jsxs)("table",{className:"min-w-full mb-4",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left py-2",children:"Item"}),(0,s.jsx)("th",{className:"text-right py-2",children:"Qty"}),(0,s.jsx)("th",{className:"text-right py-2",children:"Price"}),(0,s.jsx)("th",{className:"text-center py-2",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:$.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"py-2",children:e.name||"N/A"}),(0,s.jsx)("td",{className:"text-right py-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("button",{className:"bg-gray-200 text-gray-800 px-3 py-1 rounded hover:bg-gray-300",onClick:()=>eP(t,-1),"aria-label":"Decrease quantity for ".concat(e.name),children:"-"}),(0,s.jsx)("span",{children:e.quantity||1}),(0,s.jsx)("button",{className:"bg-gray-200 text-gray-800 px-3 py-1 rounded hover:bg-gray-300",onClick:()=>eP(t,1),"aria-label":"Increase quantity for ".concat(e.name),children:"+"})]})}),(0,s.jsxs)("td",{className:"text-right py-2",children:["₹",((e.price||0)*(e.quantity||1)).toFixed(2)]}),(0,s.jsx)("td",{className:"text-center py-2",children:(0,s.jsx)("button",{className:"text-red-600 hover:text-red-800",onClick:()=>eO(t),"aria-label":"Remove item ".concat(e.name),children:(0,s.jsx)(p.Z,{className:"h-5 w-5"})})})]},"".concat(e.item_id,"-").concat(t)))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Add Item"}),(0,s.jsxs)("select",{className:"border p-2 w-full rounded-md",onChange:e=>eI(e.target.value),value:"","aria-label":"Add item to order",children:[(0,s.jsx)("option",{value:"",children:"Select item"}),j.filter(e=>e.is_available).map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (₹",(e.price||0).toFixed(2),")"]},e.id))]})]})]}),(0,s.jsxs)("div",{className:"p-4 border-t flex justify-end gap-4",children:[(0,s.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition",onClick:()=>{V(null),X([])},"aria-label":"Cancel edit",children:"Cancel"}),(0,s.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",onClick:eT,"aria-label":"Save order changes",children:"Update Order"})]})]})}),"Order History"===Z&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Order History"}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date Range"}),(0,s.jsxs)("select",{className:"border p-2 w-full rounded-md",value:G.dateRange,onChange:e=>B({...G,dateRange:e.target.value,page:1}),"aria-label":"Select date range",children:[(0,s.jsx)("option",{value:"today",children:"Today"}),(0,s.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,s.jsx)("option",{value:"last7days",children:"Last 7 Days"}),(0,s.jsx)("option",{value:"custom",children:"Custom Range"})]}),"custom"===G.dateRange&&(0,s.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(w(),{selected:G.customStart,onChange:e=>B({...G,customStart:e,page:1}),className:"border p-2 rounded-md w-full","aria-label":"Select start date"})}),(0,s.jsx)("div",{children:(0,s.jsx)(w(),{selected:G.customEnd,onChange:e=>B({...G,customEnd:e,page:1}),className:"border p-2 rounded-md w-full","aria-label":"Select end date"})})]})]}),(0,s.jsx)(S,{label:"Status",statuses:G.statuses,onChange:e=>B({...G,statuses:e,page:1})})]})}),0===Q.length?(0,s.jsx)("p",{className:"text-gray-500 text-center",children:"No orders found."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("table",{className:"w-full bg-white rounded-lg shadow-md",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4",children:"Order ID"}),(0,s.jsx)("th",{className:"text-center py-3 px-4",children:"Date"}),(0,s.jsx)("th",{className:"text-center py-3 px-4",children:"Table"}),(0,s.jsx)("th",{className:"text-right py-3 px-4",children:"Total"}),(0,s.jsx)("th",{className:"text-left py-3 px-4",children:"Status"}),(0,s.jsx)("th",{className:"text-left py-3 px-4",children:"Payment Method"}),(0,s.jsx)("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:Q.slice((G.page-1)*G.perPage,G.page*G.perPage).map(e=>{let t=e.items.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0);return(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:e.order_number||e.id}),(0,s.jsx)("td",{className:"text-center py-3 px-4",children:ew(new Date(e.created_at))}),(0,s.jsx)("td",{className:"text-center py-3 px-4",children:e.table_id||"N/A"}),(0,s.jsxs)("td",{className:"text-right py-3 px-4",children:["₹",t.toFixed(2)]}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.status}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.payment_type||"N/A"}),(0,s.jsxs)("td",{className:"text-center py-3 px-4 flex items-center gap-2 justify-center",children:[(0,s.jsx)("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>er(e),"aria-label":"View invoice for order ".concat(e.order_number||e.id),children:"View"}),(0,s.jsx)("button",{className:"text-gray-600 hover:text-gray-800",onClick:()=>eq(e),"aria-label":"Print invoice for order ".concat(e.order_number||e.id),children:(0,s.jsx)(u.Z,{className:"h-5 w-5"})})]})]},e.id)})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 disabled:bg-gray-300 disabled:opacity-50",onClick:()=>B({...G,page:G.page-1}),disabled:1===G.page,"aria-label":"Previous page",children:"Previous"}),(0,s.jsxs)("span",{children:["Page ",G.page," of ",Math.ceil(Q.length/G.perPage)]}),(0,s.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 disabled:bg-gray-300 disabled:opacity-50",onClick:()=>B({...G,page:G.page+1}),disabled:G.page*G.perPage>=Q.length,"aria-label":"Next page",children:"Next"})]})]})]}),es&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] mx-2 sm:mx-4 flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 sm:p-6 border-b shrink-0",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:["Invoice #",es.order_number||es.id]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:ew(new Date(es.created_at))}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Table ",es.table_id||"N/A"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Payment Method: ",es.payment_type||"N/A"]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 sm:p-6",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left py-2 px-3 text-sm font-medium text-gray-700",children:"Item"}),(0,s.jsx)("th",{className:"text-right py-2 px-3 text-sm font-medium text-gray-700",children:"Qty"}),(0,s.jsx)("th",{className:"text-right py-2 px-3 text-sm font-medium text-gray-700",children:"Amount"})]})}),(0,s.jsx)("tbody",{children:es.items.map((e,t)=>(0,s.jsxs)("tr",{className:t%2==0?"bg-gray-50":"",children:[(0,s.jsx)("td",{className:"py-2 px-3 text-sm text-gray-600",children:e.name||"N/A"}),(0,s.jsx)("td",{className:"text-right py-2 px-3 text-sm text-gray-600",children:e.quantity||1}),(0,s.jsxs)("td",{className:"text-right py-2 px-3 text-sm text-gray-600",children:["₹",((e.price||0)*(e.quantity||1)).toFixed(2)]})]},"".concat(e.item_id,"-").concat(t)))})]})}),(0,s.jsxs)("div",{className:"p-4 sm:p-6 border-t shrink-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 font-semibold text-sm sm:text-base",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["₹",es.items.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition text-sm sm:text-base",onClick:()=>er(null),"aria-label":"Close invoice",children:"Close"}),(0,s.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm sm:text-base flex items-center gap-1",onClick:()=>eq(es),"aria-label":"Print invoice for order ".concat(es.order_number||es.id),children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Print"]})]})]})]})}),"Menu Management"===Z&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Menu Management"}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Item"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:v.name,onChange:e=>_({...v,name:e.target.value}),className:"border p-2 rounded-md w-full","aria-label":"Item name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Category"}),(0,s.jsx)("input",{type:"text",value:v.category,onChange:e=>_({...v,category:e.target.value}),className:"border p-2 rounded-md w-full","aria-label":"Item category"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Price"}),(0,s.jsx)("input",{type:"number",value:v.price,onChange:e=>_({...v,price:e.target.value}),className:"border p-2 rounded-md w-full","aria-label":"Item price"})]}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:v.is_available,onChange:e=>_({...v,is_available:e.target.checked}),className:"mr-2","aria-label":"Item availability"}),"Available"]})})]}),(0,s.jsx)("button",{className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",onClick:eE,"aria-label":"Add menu item",children:"Add Item"})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Menu Items"}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50 border-b",children:[(0,s.jsx)("th",{className:"text-left py-3 px-3 text-sm font-semibold text-gray-700",children:"Name"}),(0,s.jsx)("th",{className:"text-left py-3 px-3 text-sm font-semibold text-gray-700",children:"Category"}),(0,s.jsx)("th",{className:"text-right py-3 px-3 text-sm font-semibold text-gray-700",children:"Price"}),(0,s.jsx)("th",{className:"text-center py-3 px-5 text-sm font-semibold text-gray-700",children:"Available"}),(0,s.jsx)("th",{className:"text-center py-3 px-5 text-sm font-semibold text-gray-700",children:"Image"}),(0,s.jsx)("th",{className:"text-center py-3 px-5 text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:j.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b ".concat(t%2==0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-800",children:e.name||"N/A"}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.category||"N/A"}),(0,s.jsxs)("td",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["₹",(e.price||0).toFixed(2)]}),(0,s.jsx)("td",{className:"text-center py-3 px-5",children:e.is_available?(0,s.jsx)(g.Z,{className:"h-4 w-4 text-green-600 mx-auto"}):(0,s.jsx)(b.Z,{className:"h-4 w-4 text-red-600 mx-auto"})}),(0,s.jsx)("td",{className:"text-center py-3 px-5",children:e.image_url?(0,s.jsx)("img",{src:e.image_url,alt:"Image of ".concat(e.name||"menu item"),className:"h-12 w-12 rounded-md object-cover mx-auto"}):(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"No Image"})}),(0,s.jsxs)("td",{className:"text-center py-3 px-4 flex items-center justify-center gap-2",children:[(0,s.jsxs)("label",{className:"cursor-pointer",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5 text-blue-600 hover:text-blue-800"}),(0,s.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:t=>eH(e.id,t.target.files[0]),"aria-label":"Upload image for ".concat(e.name)})]}),(0,s.jsx)("button",{className:"text-red-600 hover:text-red-800 disabled:opacity-50",onClick:()=>eR(e.id,e.image_url),disabled:!e.image_url,"aria-label":"Delete image for ".concat(e.name),children:(0,s.jsx)(f.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{className:"text-blue-600 hover:text-blue-800 text-sm",onClick:()=>eA(e.id,e.is_available),"aria-label":"Toggle availability for ".concat(e.name),children:e.is_available?"Disable":"Enable"}),(0,s.jsx)("button",{className:"text-red-600 hover:text-red-800",onClick:()=>eF(e.id),"aria-label":"Remove ".concat(e.name),children:(0,s.jsx)(p.Z,{className:"h-5 w-5"})})]})]},e.id))})]})})]}),"Data Analytics"===Z&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Analytics"}),ep?(0,s.jsx)("p",{className:"text-gray-500 text-center",children:"Loading analytics..."}):L?(0,s.jsxs)("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg mb-6",role:"alert",children:[L,(0,s.jsx)("button",{className:"ml-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",onClick:ev,"aria-label":"Retry fetching analytics",children:"Retry"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Total Orders"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:eb.totalOrders})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Total Revenue"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["₹",(eb.totalRevenue||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Most Sold Item"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:eb.mostSoldItem[0]}),(0,s.jsxs)("p",{className:"text-sm",children:[eb.mostSoldItem[1]," sold"]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Peak Hour"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:eb.peakHour})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Weekly Revenue"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["₹",(el||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Monthly Revenue"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["₹",(ei||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Average Order Value"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["₹",(eb.aov||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Total Items Sold"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:eb.totalItemsSold})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Export Orders"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Export Type"}),(0,s.jsxs)("select",{className:"border p-2 w-full rounded-md",value:K,onChange:e=>ee(e.target.value),"aria-label":"Select export type",children:[(0,s.jsx)("option",{value:"order",children:"Order Summary"}),(0,s.jsx)("option",{value:"items",children:"Items"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),(0,s.jsx)(w(),{selected:et.startDate,onChange:e=>ea({...et,startDate:e}),className:"border p-2 rounded-md w-full","aria-label":"Select start date for export"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),(0,s.jsx)(w(),{selected:et.endDate,onChange:e=>ea({...et,endDate:e}),className:"border p-2 rounded-md w-full","aria-label":"Select end date for export"})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(S,{label:"Status",statuses:et.statuses,onChange:e=>ea({...et,statuses:e})})}),(0,s.jsx)("button",{className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",onClick:eM,"aria-label":"Export orders",children:"Export"})]})]})]})]})]})}):(0,s.jsx)(k,{children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Login"}),L&&(0,s.jsx)("p",{className:"text-red-500 mb-4 text-center",role:"alert",children:L}),(0,s.jsx)("input",{type:"email",placeholder:"Email",value:A,onChange:e=>H(e.target.value),className:"border p-2 w-full mb-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Email address"}),(0,s.jsx)("input",{type:"password",placeholder:"Password",value:R,onChange:e=>q(e.target.value),className:"border p-2 w-full mb-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Password"}),(0,s.jsx)("button",{className:"bg-blue-600 text-white px-4 py-3 rounded-lg w-full hover:bg-blue-700 transition",onClick:eS,"aria-label":"Login",children:"Login"})]})})})}S.propTypes={statuses:v().arrayOf(v().string).isRequired,onChange:v().func.isRequired,label:v().string.isRequired}}},function(e){e.O(0,[982,234,913,250,888,774,179],function(){return e(e.s=8195)}),_N_E=e.O()}]);